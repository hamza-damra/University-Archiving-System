# Test profile configuration
# Note: spring.profiles.active is set via @ActiveProfiles annotation, not here
# Profile-specific properties files cannot set spring.profiles.active

# Database configuration for tests
spring.datasource.url=jdbc:h2:mem:testdb
spring.datasource.driver-class-name=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# JPA configuration
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect

# Disable Flyway for tests (or use H2-compatible migrations)
spring.flyway.enabled=false

# Session management - Use JDBC session for tests (with H2 tables)
spring.session.store-type=jdbc
spring.session.jdbc.initialize-schema=never
spring.session.jdbc.table-name=SPRING_SESSION

# Security configuration
spring.security.user.name=test
spring.security.user.password=test

# JWT Configuration for tests
jwt.secret=testSecretKeyForTestingPurposesOnly123456789012345678901234567890
jwt.expiration=86400000
jwt.refresh-expiration=604800000
jwt.max-refresh-tokens-per-user=5

# File Upload Settings for tests
file.upload.directory=target/test-uploads/
app.upload.base-path=target/test-uploads/
app.upload.allowed-extensions=pdf,doc,docx,ppt,pptx,xls,xlsx,txt,zip,rar,jpg,jpeg,png,gif,csv
app.upload.max-file-count=10
app.upload.max-total-size-mb=1000
app.upload.create-directories=true
file.max-size=104857600

# SQL initialization - create Spring Session tables for tests
spring.sql.init.mode=always
spring.sql.init.platform=h2
spring.sql.init.schema-locations=classpath:schema-h2.sql
spring.sql.init.continue-on-error=true

# Rate limiting - Disable for tests
app.rate-limit.enabled=false

# Logging
logging.level.com.alquds.edu=DEBUG
logging.level.org.springframework.security=DEBUG
