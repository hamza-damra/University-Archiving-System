# File Explorer Quick Reference

## Quick Start

```javascript
import FileExplorer from './file-explorer.js';

// 1. Create instance
const fileExplorer = new FileExplorer('containerId', {
    role: 'PROFESSOR',  // or 'HOD', 'DEANSHIP'
    readOnly: false
});

// 2. Store globally
window.fileExplorerInstance = fileExplorer;

// 3. Load data
await fileExplorer.loadRoot(academicYearId, semesterId);
```

---

## Configuration Cheat Sheet

### Professor Dashboard
```javascript
{
    role: 'PROFESSOR',
    showOwnershipLabels: true,
    readOnly: false
}
```
**Shows**: "Your Folder" (blue), "Read Only" (gray)

### HOD Dashboard
```javascript
{
    role: 'HOD',
    showDepartmentContext: true,
    headerMessage: 'Browse department files (Read-only)',
    readOnly: true
}
```
**Shows**: Header message, "Read Only" (gray)

### Deanship Dashboard
```javascript
{
    role: 'DEANSHIP',
    showAllDepartments: true,
    showProfessorLabels: true,
    readOnly: true
}
```
**Shows**: Professor names (purple)

---

## Common Methods

| Method | Description | Example |
|--------|-------------|---------|
| `loadRoot(yearId, semId)` | Load semester root | `await fileExplorer.loadRoot(1, 1)` |
| `loadNode(path)` | Navigate to folder | `await fileExplorer.loadNode("2024-2025/first")` |
| `showLoading()` | Show loading state | `fileExplorer.showLoading()` |
| `renderError(msg, detail)` | Show error state | `fileExplorer.renderError("Failed", "Try again")` |

---

## Role-Specific Labels

### Professor Role
- ðŸ”µ **Your Folder** - `canWrite: true` - Blue badge
- âšª **Read Only** - `canRead: true, canWrite: false` - Gray badge

### HOD Role
- âšª **Read Only** - All folders - Gray badge
- â„¹ï¸ Header message displayed

### Deanship Role
- ðŸŸ£ **Professor Name** - On professor folders - Purple badge

---

## Tailwind Classes Reference

### Folder Cards
```
p-4 bg-blue-50 rounded-lg border border-blue-200 hover:bg-blue-100
```

### Labels
```
Your Folder:    bg-blue-100 text-blue-800
Read Only:      bg-gray-100 text-gray-600
Professor Name: bg-purple-100 text-purple-700
```

### Buttons
```
Download: bg-blue-600 text-white hover:bg-blue-700
View:     text-gray-600 hover:text-gray-900 hover:bg-gray-100
```

---

## Node Data Structure

```javascript
{
    name: "Display Name",
    path: "full/path/to/node",
    type: "YEAR|SEMESTER|PROFESSOR|COURSE|DOCUMENT_TYPE|FILE",
    canRead: true,
    canWrite: false,
    children: [...],
    metadata: {
        description: "...",
        fileSize: 1024,
        fileType: "application/pdf",
        uploadedAt: "ISO date",
        uploaderName: "Name",
        fileId: 123,
        professorName: "Prof. Name"
    }
}
```

---

## Troubleshooting

| Problem | Solution |
|---------|----------|
| Container not found | Check element exists before init |
| Breadcrumbs don't work | Store instance in `window.fileExplorerInstance` |
| Labels not showing | Check `showOwnershipLabels` / `showProfessorLabels` |
| Download fails | Verify `metadata.fileId` exists |
| No animation | Check `custom.css` has skeleton styles |

---

## Master Design Reference

**Authority**: Professor Dashboard (`prof-dashboard.html` + `prof.js`)

All visual styling, HTML structure, and Tailwind classes are defined in the Professor Dashboard File Explorer implementation.

---

## API Methods Required

```javascript
fileExplorer.getRoot(academicYearId, semesterId)
fileExplorer.getNode(path)
fileExplorer.getBreadcrumbs(path)
fileExplorer.getFileMetadata(fileId)
fileExplorer.downloadFile(fileId)
```

---

## Best Practices

âœ… **DO**:
- Store instance globally: `window.fileExplorerInstance = fileExplorer`
- Handle errors with try-catch
- Test with all three roles
- Use semantic HTML

âŒ **DON'T**:
- Modify HTML structure (breaks consistency)
- Change Tailwind classes without updating master
- Skip error handling
- Forget to load instance globally

---

## Color Codes

| Color | Usage | Class |
|-------|-------|-------|
| Blue | Folders, ownership | `bg-blue-50`, `text-blue-600` |
| Gray | Read-only, metadata | `bg-gray-100`, `text-gray-600` |
| Purple | Professor labels | `bg-purple-100`, `text-purple-700` |
| Red | PDF files, errors | `text-red-600` |
| Amber | ZIP files | `text-amber-600` |
| Green | Images | `text-green-600` |

---

## File Type Icons

| Type | Color | Class |
|------|-------|-------|
| PDF | Red | `text-red-600` |
| ZIP/Archive | Amber | `text-amber-600` |
| Word/Doc | Blue | `text-blue-600` |
| Image | Green | `text-green-600` |
| Other | Gray | `text-gray-500` |

---

## Event Handlers

File Explorer uses inline event handlers that require global instance:

```javascript
// In HTML (generated by File Explorer)
onclick="window.fileExplorerInstance.handleNodeClick('path')"
onclick="window.fileExplorerInstance.handleBreadcrumbClick(event, 'path')"
onclick="window.fileExplorerInstance.handleFileDownload(fileId)"
onclick="window.fileExplorerInstance.handleFileView(fileId)"
onclick="window.fileExplorerInstance.toggleNode('path')"
```

**Always set**: `window.fileExplorerInstance = fileExplorer;`

---

## Complete Example

```javascript
// dashboard.js
import FileExplorer from './file-explorer.js';
import { showToast } from './ui.js';

let fileExplorer = null;

document.addEventListener('DOMContentLoaded', () => {
    // Initialize
    fileExplorer = new FileExplorer('fileExplorerContainer', {
        role: 'PROFESSOR',
        showOwnershipLabels: true,
        readOnly: false
    });
    
    // Store globally
    window.fileExplorerInstance = fileExplorer;
    
    // Setup semester selector
    document.getElementById('semesterSelect').addEventListener('change', async (e) => {
        const semesterId = e.target.value;
        const yearId = document.getElementById('yearSelect').value;
        
        if (yearId && semesterId) {
            try {
                await fileExplorer.loadRoot(yearId, semesterId);
            } catch (error) {
                console.error('Error:', error);
                showToast('Failed to load files', 'error');
            }
        }
    });
});
```

---

## Documentation Files

- **Comprehensive Guide**: `FILE_EXPLORER_DEVELOPER_GUIDE.md`
- **Quick Reference**: `FILE_EXPLORER_QUICK_REFERENCE.md` (this file)
- **Source Code**: `src/main/resources/static/js/file-explorer.js`
- **Master Design**: `src/main/resources/static/prof-dashboard.html`

---

## Support

For detailed information, see `FILE_EXPLORER_DEVELOPER_GUIDE.md`
