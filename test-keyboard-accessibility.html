<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Keyboard Navigation & Accessibility Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="src/main/resources/static/css/common.css">
    <style>
        .test-section {
            background: white;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .keyboard-hint {
            display: inline-block;
            padding: 2px 6px;
            background: #e5e7eb;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9em;
            margin: 0 2px;
        }
        .feature-list {
            list-style: none;
            padding: 0;
        }
        .feature-list li {
            padding: 8px 0;
            border-bottom: 1px solid #e5e7eb;
        }
        .feature-list li:last-child {
            border-bottom: none;
        }
        .status-badge {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 12px;
            font-size: 0.85em;
            font-weight: 600;
        }
        .status-badge.implemented {
            background: #d1fae5;
            color: #065f46;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="max-w-4xl mx-auto p-6">
        <div class="test-section">
            <h1 class="text-3xl font-bold mb-4">üéπ Keyboard Navigation & ‚ôø Accessibility Test</h1>
            <p class="text-gray-600 mb-4">
                This page demonstrates the keyboard navigation and accessibility features implemented in the File Preview Modal.
            </p>
            <button onclick="openTestPreview()" 
                    class="px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium">
                Open Preview Modal
            </button>
        </div>

        <div class="test-section">
            <h2 class="text-2xl font-bold mb-4">Keyboard Shortcuts</h2>
            <ul class="feature-list">
                <li>
                    <span class="keyboard-hint">Escape</span> - Close the preview modal
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <span class="keyboard-hint">Ctrl</span> + <span class="keyboard-hint">F</span> - Toggle search bar
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <span class="keyboard-hint">Ctrl</span> + <span class="keyboard-hint">D</span> - Download file
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <span class="keyboard-hint">‚Üê</span> <span class="keyboard-hint">‚Üí</span> - Navigate pages (for multi-page documents)
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <span class="keyboard-hint">‚Üë</span> <span class="keyboard-hint">‚Üì</span> - Scroll content
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <span class="keyboard-hint">Home</span> - Scroll to top
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <span class="keyboard-hint">End</span> - Scroll to bottom
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <span class="keyboard-hint">Tab</span> / <span class="keyboard-hint">Shift</span> + <span class="keyboard-hint">Tab</span> - Navigate between interactive elements (focus trap)
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
            </ul>
        </div>

        <div class="test-section">
            <h2 class="text-2xl font-bold mb-4">Accessibility Features</h2>
            <ul class="feature-list">
                <li>
                    <strong>ARIA Roles:</strong> Modal has <code>role="dialog"</code> and <code>aria-modal="true"</code>
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <strong>ARIA Labels:</strong> All buttons have descriptive <code>aria-label</code> attributes
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <strong>Focus Management:</strong> Focus is trapped within the modal when open
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <strong>Focus Restoration:</strong> Focus returns to trigger element when modal closes
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <strong>Screen Reader Announcements:</strong> State changes are announced via live regions
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <strong>Keyboard Hints:</strong> ARIA labels include keyboard shortcut information
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <strong>Live Regions:</strong> Search results and status updates use <code>aria-live="polite"</code>
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
                <li>
                    <strong>Semantic HTML:</strong> Proper use of <code>&lt;button&gt;</code>, <code>&lt;input&gt;</code>, and heading elements
                    <span class="status-badge implemented">‚úì Implemented</span>
                </li>
            </ul>
        </div>

        <div class="test-section">
            <h2 class="text-2xl font-bold mb-4">Testing Instructions</h2>
            <div class="space-y-4">
                <div>
                    <h3 class="font-semibold text-lg mb-2">Keyboard-Only Navigation Test:</h3>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li>Click "Open Preview Modal" button above</li>
                        <li>Use <span class="keyboard-hint">Tab</span> to navigate through all interactive elements</li>
                        <li>Verify focus stays within the modal (focus trap)</li>
                        <li>Try all keyboard shortcuts listed above</li>
                        <li>Press <span class="keyboard-hint">Escape</span> to close</li>
                    </ol>
                </div>
                
                <div>
                    <h3 class="font-semibold text-lg mb-2">Screen Reader Test:</h3>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li>Enable your screen reader (NVDA, JAWS, or VoiceOver)</li>
                        <li>Open the preview modal</li>
                        <li>Verify the screen reader announces "File preview opened"</li>
                        <li>Navigate through elements and verify all have proper labels</li>
                        <li>Trigger actions and verify state changes are announced</li>
                        <li>Close modal and verify "File preview closed" is announced</li>
                    </ol>
                </div>
                
                <div>
                    <h3 class="font-semibold text-lg mb-2">Focus Management Test:</h3>
                    <ol class="list-decimal list-inside space-y-2 text-gray-700">
                        <li>Focus the "Open Preview Modal" button</li>
                        <li>Press <span class="keyboard-hint">Enter</span> to open modal</li>
                        <li>Verify focus moves into the modal</li>
                        <li>Press <span class="keyboard-hint">Escape</span> to close</li>
                        <li>Verify focus returns to the "Open Preview Modal" button</li>
                    </ol>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2 class="text-2xl font-bold mb-4">WCAG 2.1 Compliance</h2>
            <p class="text-gray-700 mb-4">
                The implementation follows WCAG 2.1 Level AA guidelines:
            </p>
            <ul class="space-y-2 text-gray-700">
                <li>‚úÖ <strong>1.3.1 Info and Relationships:</strong> Semantic HTML and ARIA roles</li>
                <li>‚úÖ <strong>2.1.1 Keyboard:</strong> All functionality available via keyboard</li>
                <li>‚úÖ <strong>2.1.2 No Keyboard Trap:</strong> Focus can be moved away using standard methods</li>
                <li>‚úÖ <strong>2.4.3 Focus Order:</strong> Logical focus order maintained</li>
                <li>‚úÖ <strong>2.4.7 Focus Visible:</strong> Focus indicator visible on all elements</li>
                <li>‚úÖ <strong>4.1.2 Name, Role, Value:</strong> All UI components have accessible names</li>
                <li>‚úÖ <strong>4.1.3 Status Messages:</strong> Status updates announced via live regions</li>
            </ul>
        </div>
    </div>

    <!-- Import FilePreviewModal -->
    <script type="module">
        import { FilePreviewModal } from './src/main/resources/static/js/file-preview-modal.js';
        
        // Create global instance
        window.previewModal = new FilePreviewModal({
            onDownload: async (fileId, fileName) => {
                console.log('Download triggered for:', fileName);
                alert(`Download would start for: ${fileName}`);
            }
        });
        
        // Test function to open modal
        window.openTestPreview = function() {
            // Mock file data
            const fileId = 123;
            const fileName = 'test-document.pdf';
            const fileType = 'application/pdf';
            
            window.previewModal.open(fileId, fileName, fileType);
        };
    </script>
</body>
</html>
